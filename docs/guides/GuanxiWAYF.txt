Guanxi::WAYF

This document describes how to get hold of the Guanxi WAYF, in binary form or build it from source and configure it.

Last updated for WAYF v1.2.5

Contents
  o What is the WAYF?
  o Getting a binary distribution
  o Building from source
  o Installation
  o Configuration
  o More information
  
What is the WAYF?
--------------------------
The WAYF is the component that asks you "Where Are You From?". It's a way for a Service Provider to find out, from you, where to send Shibboleth requests to get you authenticated and then to get attributes about you, to help it make a decision on whether you should be allowed to access a resource.

Getting a binary distribution
------------------------------------
You can get a binary distribution, i.e. you don't have to build from source, from the Guanxi sourceforge site:
http://sourceforge.net/projects/guanxi
Click on the "Download Guanxi" button and then click on "guanxi" Package under Latest File Releases. You'll now see a list of the Guanxi components available for download.
Click on the guanxi-wayf-bin-xxx.tar.gz file, where xxx will be the latest version number of the WAYF binary release.
Choose your mirror and the Guanxi WAYF will be downloaded to your computer.
Uncompress the file and jump over the next section, to the installation notes.

Building from source
---------------------------
You can get the Guanxi source distribution from the Guanxi sourceforge CVS server. In a command shell, you should
enter the following commands:

cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/guanxi login
cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/guanxi co -P guanxi

when prompted for a password, just hit the enter key. You don't need one for anonymous access.

This will create a directory named guanxi, which has the following structure:

guanxi
-- CVS    : CVS information. This is only for versioning and is not used by the guanxi source code.
-- Common : The Guanxi Common module. This provides functionality that the other modules make use of.
-- Core   : The Guanxi Core module. This contains localised strings and XML schema files.
-- IdP    : The Guanxi Identity Provider.
-- SP     : The Guanxi Service Provider.
-- WAYF   : The Guanxi WAYF.
-- gx_lib : This directory contains all the JAR files required by the Guanxi modules. It's included as a convenience.
-- samuel : The Guanxi SAML toolkit.

To build the WAYF from source, change to the Core directory and enter the command:

ant wayf

This will build the WAY and put the files in guanxi/WAYF/dist/webapp.

Installation
---------------
Once you've either downloaded the binary distribution or built the WAYF from source, you should copy the files, from either the binary directory or guanxi/WAYF/dist/webapp to your servlet container's webapp root directory. The example uses:

/WWW/guanxi_wayf

Restart your servlet container and point your browser to:

http://localhost/guanxi_wayf

replacing "localhost" with your server's host name if appropriate. You should see the Guanxi WAYF page with a description of the WAYF. Note that you won't see a list of Identity Providers from this page. The IdP list is only meaningful in a Shibboleth session so you'll only see it when the WAYF is contacted by a Service Provider.

Configuration
------------------
It's easy to configure the WAYF as it only needs to know the names and addresses of Identity Providers. All you have to do is modify the file:

WEB-INF/config/wayf.xml

adding the names and addresses of Identity Providers. There's an example provided for you to modify:

<idp-list xmlns="urn:guanxi:idp">
  <idp name="My Identity Provider" url="https://myidp.uni.ac.uk/SSO" />
</idp-list>

change "name" and "url" to point to your Identity Provider:

<idp-list xmlns="urn:guanxi:idp">
  <idp name="University Identity Provider" url="https://idp.uni.ac.uk/SSO" />
</idp-list>

The "name" attribute as the human readable name of the Identity Provider. Users will be able to choose this from a list displayed by the WAYF. The "url" attribute is the URL of the Identity Provider's Single Sign-On (SSO) endpoint, i.e. the Shibboleth SSO endpoint where a user will be authenticated.

When you've modified your wayf.xml, adding a new <idp> element for each Identity Provider you wish to display, restart your servlet container and you're ready to start using the WAYF.

More information
-----------------------
If you have any comments, ideas or suggestions, drop us a note on the Guanxi mailing list, which you can join at the Guanxi sourceforge site:

http://sourceforge.net/projects/guanxi.

Alternatively you can read more documentation and post comments on the Guanxi Wiki:

http://guanxi.uhi.ac.uk/xwiki

or catch up with the latest Guanxi development gossip on the Guanxi blog:

http://www.weblogs.uhi.ac.uk/sm00ay/index.php?cat=2




