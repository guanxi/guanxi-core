Guanxi::WAYF

This document describes how to get hold of the Guanxi WAYF, in binary form or build it from source and configure it.

Contents
  o What is the WAYF?
  o Getting a binary distribution
  o Building from source
  o Installation
  o Configuration
  o More information
  
What is the WAYF?
--------------------------
The WAYF is the component that asks you "Where Are You From?". It's a way for a Service Provider to find out, from you, where to send Shibboleth requests to get you authenticated and then to get attributes about you, to help it make a decision on whether you should be allowed to access a resource.

Getting a binary distribution
------------------------------------
You can get a binary distribution, i.e. you don't have to build from source, from the Guanxi sourceforge site:
http://sourceforge.net/projects/guanxi
Click on the "Download Guanxi" button and then click on "guanxi" Package under Latest File Releases. You'll now see a list of the Guanxi components available for download.
Click on the guanxi-wayf-bin-xxx.tar.gz file, where xxx will be the latest version number of the WAYF binary release.
Choose your mirror and the Guanxi WAYF will be downloaded to your computer.
Uncompress the file and jump over the next section, to the installation notes.

Building from source
---------------------------
You can get the Guanxi source distribution from the Guanxi sourceforge site:
http://sourceforge.net/projects/guanxi
Click on the "Download Guanxi" button and then click on "guanxi" Package under Latest File Releases. You'll now see a list of the Guanxi components available for download.
Click on the guanxi-src-xxx.tar.gz file, where xxx will be the latest version number of the Guanxi source release. As the WAYF depends on other Guanxi components, there's no separate WAYF source release. Instead, download the Guanxi system source and the build file will build the WAYF for you.
Choose your mirror and the Guanxi source will be downloaded to your computer.
Uncompress the file to get the following file structure:

guanxi
-- Common         : Guanxi::Common - contains functionality shared by the Guanxi components
-- IdP                  : Guanxi::IdP - The Guanxi Identity Provider (IdP)
-- SP                   : Guanxi::SP - The Guanxi Service Provider (SP)
-- WAYF             : Guanxi::WAYF - The Guanxi WAYF
-- build.xml         : The Guanxi ant build file
-- gx_lib              : Libraries required by the Guanxi components
-- messages       : Localised text messages for the Guanxi components
-- readme.txt       : The Guanxi readme
-- samuel            : The Guanxi SAMUEL SAML toolkit
-- xsd                  : The Guanxi XML Schema files

You should now go into the guanxi directory and type the following command:

ant wayf

This will build the WAYF and put the files in guanxi/WAYF/dist/webapp.

Installation
---------------
Once you've either downloaded the binary distribution or built the WAYF from source, you should copy the files, from either the binary directory or guanxi/WAYF/dist/webapp to your servlet container's webapp root directory. The example uses:

/WWW/guanxi_wayf

Restart your servlet container and point your browser to:

http://localhost/guanxi_wayf

replacing "localhost" with your server's host name if appropriate. You should see the Guanxi WAYF page with a description of the WAYF. Note that you won't see a list of Identity Providers from this page. The IdP list is only meaningful in a Shibboleth session so you'll only see it when the WAYF is contacted by a Service Provider.

Configuration
------------------
It's easy to configure the WAYF as it only needs to know the names and addresses of Identity Providers. All you have to do is modify the file:

WEB-INF/config/wayf.xml

adding the names and addresses of Identity Providers. There's an example provided for you to modify:

<idp-list xmlns="urn:guanxi:idp">
  <idp name="My Identity Provider" url="https://myidp.uni.ac.uk/SSO" />
</idp-list>

change "name" and "url" to point to your Identity Provider:

<idp-list xmlns="urn:guanxi:idp">
  <idp name="University Identity Provider" url="https://idp.uni.ac.uk/SSO" />
</idp-list>

The "name" attribute as the human readable name of the Identity Provider. Users will be able to choose this from a list displayed by the WAYF. The "url" attribute is the URL of the Identity Provider's Single Sign-On (SSO) endpoint, i.e. the Shibboleth SSO endpoint where a user will be authenticated.

When you've modified your wayf.xml, adding a new <idp> element for each Identity Provider you wish to display, restart your servlet container and you're ready to start using the WAYF.

More information
-----------------------
If you have any comments, ideas or suggestions, drop us a note on the Guanxi mailing list, which you can join at the Guanxi sourceforge site:

http://sourceforge.net/projects/guanxi.

Alternatively you can read more documentation and post comments on the Guanxi Wiki:

http://guanxi.uhi.ac.uk/xwiki

or catch up with the latest Guanxi development gossip on the Guanxi blog:

http://www.weblogs.uhi.ac.uk/sm00ay/index.php?cat=2




